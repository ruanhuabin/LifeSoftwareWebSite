<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>


<%!

public Map<String, String> convert(String str) 
{
    String[] tokens = str.split(",|=");
    Map<String, String> map = new HashMap<String, String>();
    for (int i=0; i<tokens.length-1; ) 
    	map.put(tokens[i++], tokens[i++]);
    return map;
}

 %>

<%
	String str = request.getParameter("currPageData");
	Map<String, String> pageInfo = convert(str);
	out.println(pageInfo);
 %>
 
 <p>str=<%=str%></p>
 <p>totalPage=<%=pageInfo.get("totalPage") %></p>
 <p>totalPage=<%=pageInfo.get("allRows") %></p>
<div align="center">
    
                            共<font color="red"><%=pageInfo.get("totalPage")%></font>页&nbsp;&nbsp;
                           共<font color="red"><%=pageInfo.get("allRows")%></font>条记录
        
        <s:if test="#request.pageBean.currentPage == 1">
            <font size=2>首页&nbsp;&nbsp;&nbsp;上一页</font>
        </s:if>
        
        <s:else>
            <a href="Users_queryByPage.action?page=0"><font size=2>首页</font></a>
            &nbsp;&nbsp;&nbsp;
            <a href="Users_queryByPage.action?page=<s:property value="#request.pageBean.currentPage - 1"/>"><font size=2>上一页</font></a>
        </s:else>
        
        <s:if test="#request.pageBean.currentPage != #request.pageBean.totalPage">
            <a href="Users_queryByPage.action?page=<s:property value="#request.pageBean.currentPage + 1"/>"><font size=2>下一页</font></a>
            &nbsp;&nbsp;&nbsp;
            <a href="Users_queryByPage.action?page=<s:property value="#request.pageBean.totalPage"/>"><font size=2>尾页</font></a>
        </s:if>
        
        <s:else>
            <font size=2>下一页&nbsp;&nbsp;&nbsp;尾页</font>
        </s:else>
    
   </div>
   
   <div align="center">
        
        <form action="Users_queryByPage.action" onsubmit="return validate();">
            <font size="2">跳转至</font>            
            <input type="text" size="5" name="page" >页
            <input type="submit" value="跳转">
        </form>
        
    </div>
